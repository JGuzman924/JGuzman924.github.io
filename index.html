<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Guess the Number Game</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0; padding: 20px;
    background: linear-gradient(135deg, #1e90ff, #00c853);
    min-height: 100vh; display: flex; justify-content: center; align-items: flex-start;
    color: #fff;
  }

  .container {
    display: flex; gap: 30px; flex-wrap: wrap; justify-content: center;
  }

  .game-container, .leaderboard-container {
    background-color: rgba(255,255,255,0.15);
    border-radius: 20px;
    padding: 25px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
  }

  .game-container { width: 350px; display: flex; flex-direction: column; gap: 10px; }
  .leaderboard-container { width: 250px; display: flex; flex-direction: column; gap: 10px; }

  h1, h2 { margin-top: 0; color: #e3f2fd; }
  h2 { font-size: 22px; }

  select, input[type="number"], button {
    width: 100%; padding: 12px; border-radius: 12px; border: none; font-size: 16px;
  }

  input[type="number"] {
    -moz-appearance: textfield;
    -webkit-appearance: none;
    appearance: none;
    margin: 0;
    background-color: #e3f2fd;
    color: #000;
  }
  input::-webkit-inner-spin-button, 
  input::-webkit-outer-spin-button { 
    -webkit-appearance: none; margin: 0; 
  }

  button { background-color: #00c853; color: #fff; cursor: pointer; transition: 0.3s; margin-top: 5px; }
  button:hover { background-color: #009624; transform: scale(1.05); }

  #feedback { font-weight: bold; font-size: 18px; min-height: 24px; }
  #attempts, #score { font-weight: bold; }
  #guessesList, #scoresList { list-style: none; padding-left: 0; margin: 0; }
  #guessesList li, #scoresList li {
    background-color: rgba(255,255,255,0.15); margin: 3px 0; padding: 5px 8px; border-radius: 6px;
  }

  .overlay { position: fixed; top:0; left:0; width:100%; height:100%;
    display:flex; flex-direction:column; justify-content:center; align-items:center;
    background: rgba(0,0,0,0.85); font-size: 24px; color:#fff;
    opacity:0; pointer-events:none; transition: opacity 0.4s; z-index: 999;
  }
  .overlay.active { opacity:1; pointer-events:all; }
  .overlay button { margin-top: 20px; padding: 12px 25px; font-size: 18px; border-radius: 12px; background: #00c853; border: none; cursor: pointer; }
  .win { background: rgba(0,200,83,0.9); }
  .lose { background: rgba(255,82,82,0.9); }
</style>
</head>
<body>
<div class="container">
  <div class="game-container">
    <h1>üéØ Guess the Number!</h1>
    <select id="difficulty" onchange="initGame()">
      <option value="easy">Easy (1‚Äì20, 10 attempts)</option>
      <option value="medium">Medium (1‚Äì50, 7 attempts)</option>
      <option value="hard">Hard (1‚Äì100, 5 attempts)</option>
    </select>
    <input type="number" id="guess" placeholder="Enter your guess" />
    <button onclick="makeGuess()">Guess</button>
    <button onclick="getHint()">Hint</button>
    <p id="feedback"></p>
    <p>Attempts Left: <span id="attempts"></span></p>
    <p>Score: <span id="score">0</span></p>
    <p>Previous Guesses:</p>
    <ul id="guessesList"></ul>
  </div>

  <div class="leaderboard-container">
    <h2>üèÜ Leaderboard</h2>
    <ul id="scoresList"></ul>
  </div>
</div>

<div id="winScreen" class="overlay win">
  <p>üèÜ You Win!</p>
  <p id="winMessage"></p>
  <button onclick="closeOverlay(true)">Continue</button>
</div>

<div id="loseScreen" class="overlay lose">
  <p>üíÄ You Lost!</p>
  <p id="loseMessage"></p>
  <button onclick="closeOverlay(true)">Continue</button>
</div>

<script>
let number, attemptsLeft, maxAttempts, score = 0;
let min, max;
let leaderboard = JSON.parse(localStorage.getItem("leaderboard")) || [];
let pendingScore = null;
let previousGuesses = [];

function initGame() {
  const difficulty = document.getElementById("difficulty").value;
  if(difficulty==="easy"){min=1; max=20; maxAttempts=10;}
  else if(difficulty==="medium"){min=1; max=50; maxAttempts=7;}
  else{min=1; max=100; maxAttempts=5;}
  number = Math.floor(Math.random()*(max-min+1))+min;
  attemptsLeft=maxAttempts;
  document.getElementById("attempts").textContent=attemptsLeft;
  document.getElementById("feedback").textContent="";
  document.getElementById("guess").value="";
  previousGuesses=[];
  updateGuessesList();
}

function makeGuess(){
  const input=document.getElementById("guess");
  const guess=parseInt(input.value);
  if(isNaN(guess)) return;
  previousGuesses.push(guess);
  updateGuessesList();
  attemptsLeft--;
  document.getElementById("attempts").textContent=attemptsLeft;
  if(guess===number){
    score+=attemptsLeft+1;
    document.getElementById("score").textContent=score;
    pendingScore=score;
    showWinScreen();
  } else if(guess<number){document.getElementById("feedback").textContent="‚¨áÔ∏è Too low!";}
  else{document.getElementById("feedback").textContent="‚¨ÜÔ∏è Too high!";}
  input.value="";
  if(attemptsLeft<=0 && guess!==number){pendingScore=null; showLoseScreen();}
}

function updateGuessesList(){
  const list=document.getElementById("guessesList");
  list.innerHTML="";
  previousGuesses.forEach(g=>{
    const li=document.createElement("li");
    li.textContent=g;
    list.appendChild(li);
  });
}

function showWinScreen(){
  document.getElementById("winMessage").textContent=`You guessed it! The number was ${number}.`;
  document.getElementById("winScreen").classList.add("active");
}

function showLoseScreen(){
  document.getElementById("loseMessage").textContent=`You ran out of attempts! The number was ${number}.`;
  document.getElementById("loseScreen").classList.add("active");
}

function closeOverlay(enterName=false){
  document.getElementById("winScreen").classList.remove("active");
  document.getElementById("loseScreen").classList.remove("active");
  if(enterName && pendingScore!==null) saveScore(pendingScore);
  pendingScore=null;
  initGame();
}

function getHint(){
  const range=Math.floor((max-min)/4);
  let hintMin=Math.max(min, number-range);
  let hintMax=Math.min(max, number+range);
  alert(`üí° Hint: The number is between ${hintMin} and ${hintMax}`);
}

function saveScore(score){
  const name = prompt("Enter your name for the leaderboard:");
  const difficulty = document.getElementById("difficulty").value;
  
  leaderboard.push({name, score, difficulty});
  
  // Sort: First put Hard mode first-try wins on top, then by score descending
  leaderboard.sort((a,b)=>{
    const aFirstHard = a.difficulty==="hard" && a.score===5;
    const bFirstHard = b.difficulty==="hard" && b.score===5;
    if(aFirstHard && !bFirstHard) return -1;
    if(bFirstHard && !aFirstHard) return 1;
    return b.score - a.score;
  });

  if(leaderboard.length>10) leaderboard.pop();
  localStorage.setItem("leaderboard", JSON.stringify(leaderboard));
  displayLeaderboard();
}

function displayLeaderboard(){
  const scoresList = document.getElementById("scoresList");
  scoresList.innerHTML = "";
  leaderboard.forEach(item=>{
    const li = document.createElement("li");
    li.textContent = `${item.name}: ${item.score} (${item.difficulty})`;
    scoresList.appendChild(li);
  });
}

document.getElementById("guess").addEventListener("keydown", function(e){
  if(e.key === "Enter") makeGuess();
});

initGame();
displayLeaderboard();
</script>
</body>
</html>
